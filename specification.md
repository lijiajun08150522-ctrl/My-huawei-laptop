# 项目规约：任务管理CLI工具 (Task Manager CLI)

## 1. 项目概述
开发一个基于命令行的任务管理工具，支持任务的增删改查和状态管理。

## 2. 功能需求

### 2.1 核心功能
- **添加任务**：`add <任务描述>` - 添加新任务
- **列出任务**：`list` - 显示所有任务
- **完成任务**：`done <任务ID>` - 标记任务为完成
- **删除任务**：`delete <任务ID>` - 删除指定任务
- **清除完成**：`clear` - 清除所有已完成的任务

### 2.2 任务属性
- ID: 唯一标识符（自增整数）
- 描述: 任务文本内容
- 状态: pending | done
- 创建时间: ISO 8601格式时间戳
- 完成时间: ISO 8601格式时间戳（完成时设置）

## 3. 数据存储
- 文件名: `tasks.json`
- 存储位置: 用户主目录 `.tasks.json`
- 格式: JSON数组

```json
[
  {
    "id": 1,
    "description": "示例任务",
    "status": "pending",
    "createdAt": "2026-01-23T10:00:00Z",
    "completedAt": null
  }
]
```

## 4. 输入输出规约

### 4.1 命令格式
```
task-cli <command> [arguments]
```

### 4.2 命令定义
- `add <description>` - 成功返回 "Added: <description>"
- `list` - 列出所有任务，格式: "[<id>] <description> (<status>)"
- `done <id>` - 成功返回 "Task <id> marked as done"
- `delete <id>` - 成功返回 "Task <id> deleted"
- `clear` - 成功返回 "Cleared all completed tasks"

### 4.3 错误处理
- 无效命令: "Error: Unknown command. Use 'help' for usage."
- 无效ID: "Error: Task <id> not found"
- 文件读写错误: "Error: Unable to read/write task file"

## 5. 约束条件
- 语言: Python 3.8+
- 无外部依赖（仅使用标准库）
- 文件不存在时自动创建
- ID自增，从1开始

## 6. 测试用例
1. 添加3个任务，列出所有任务
2. 完成第2个任务，再次列出
3. 删除第1个任务，列出剩余
4. 清除已完成的任务
5. 添加空描述应报错
# 任务管理器进阶版规约

## 1. 核心功能描述
- 支持任务的 CRUD（增删改查）操作。
- 每个任务包含：ID、内容、优先级（High/Medium/Low）、创建时间。

## 2. 数据持久化要求
- 数据必须以 JSON 格式存储在 `tasks.json` 文件中。
- 每次程序启动需自动加载，每次数据变更需自动同步。

## 3. 错误处理与健壮性
- 若 `tasks.json` 文件损坏或不存在，程序应能自动初始化空列表而不崩溃。
- 输入 ID 必须为整数，若用户输入非数字内容，程序应给出友好提示。

## 4. 自动化测试要求
- 必须包含单元测试，覆盖 100% 的核心逻辑。
## 5. 进阶功能：任务分类与排序
- **分类属性**：每个任务必须属于一个分类（如：Work, Study, Life），默认为 "General"。
- **优先级权重**：优先级不仅是标签，还需对应分值（High=3, Medium=2, Low=1）。
- **智能排序**：展示任务时，需根据“优先级分值”从高到低排列；分值相同时，按创建时间降序排列。
- **分类统计**：提供一个接口或方法，返回每个分类下的任务总数。
## 6. 智能分析与报表
- **任务概览**：系统需支持一键生成“今日简报”，列出：总任务数、已完成数、待办数。
- **效率提醒**：如果待办任务超过 5 个，在展示列表时需置顶显示一条警告：“注意：任务积压过多，请优先处理！”。
- **导出功能**：支持将当前任务列表导出为一份格式美观的 `summary.txt` 文件。
## 7. Web 界面与多端访问要求
- **后端框架**：使用 Python Flask 框架。
- **前端交互**：提供一个简洁的 HTML 页面，包含任务列表展示、添加按钮和状态勾选框。
- **局域网支持**：应用需监听 `0.0.0.0:5000` 端口，确保同 Wi-Fi 下的手机可访问。
- **数据一致性**：Web 端的操作必须实时同步到本地的 `tasks.json` 文件。
